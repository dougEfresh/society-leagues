<!DOCTYPE html "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring4-4.dtd">
<div xmlns:th="http://www.thymeleaf.org">
    <div class="society-well society-well-admin society-well-player-scores" th:fragments="playerresults">
        <div th:if="${results ne null}" id="player-results">
            <form id="result-form" th:object="${results}" th:method="post" method="post"
                  th:action="@{/app/scores/{id}/{matchId}/{date} (id=${season.id},date=${date},matchId=${results.matchId})}">
                <div class="well-title">
                    <h4 th:text="${results.getName()}"></h4>
                </div>
                <div class="table-responsive">
                    <table id="table-player-results-admin" class="table">
                        <thead>
                        <th></th>
                        <th>#</th>
                        <th>Home</th>
                        <th th:text="'Wins (' + ${homeWins} + ')'">>Racks</th>
                        <th>Away</th>
                        <th th:text="'Wins (' + ${awayWins} + ')'">>Racks</th>
                        </thead>
                        <tbody>
                        <tr th:id="${result.getId()}" th:each="result, rowStat: *{playerResults}">
                            <!--/*@thymesVar id="match" type="com.society.leagues.client.api.domain.PlayerResult"*/-->
                            <td class="delete" th:id="'delete-player-result-' + ${result.getId()}">
                                <a th:href="@{/app/scores/{id}/{matchId}/{resultId}/delete/{date}
                                    (id=${season.id},date=${date},matchId=${results.matchId},resultId=${result.id})}">
                                    <h4><span class="label label-danger"><span class="glyphicon glyphicon-remove"></span></span></h4>
                                </a>
                            </td>
                            <td class="match-number">
                                <input th:field="*{playerResults[__${rowStat.index}__].matchNumber}" type="text"
                                       th:value="${result.matchNumber}"/>
                            </td>
                            <input th:field="*{playerResults[__${rowStat.index}__].id}" type="hidden"
                                   th:value="${result.id}"/>
                            <input th:field="*{playerResults[__${rowStat.index}__].teamMatch.id}" type="hidden"
                                   th:value="${result.teamMatch.id}"/>
                            <td class="name">
                                <select th:field="*{playerResults[__${rowStat.index}__].playerHome.id}"
                                        class="form-control">
                                    <option th:each="user: ${homeMembers}"
                                            th:text="${user.name}"
                                            th:value="${user.id}"
                                            th:selected="${user.id == result.playerHome.id}"
                                    ></option>
                                </select>
                            </td>
                            <td class="racks">
                                <input th:id="'homeRacks-' +  ${result.id}"
                                       th:value="${result.homeRacks}"
                                       th:field="*{playerResults[__${rowStat.index}__].homeRacks}"
                                       type="text"
                                />

                            </td>
                            <td class="name">
                                <select th:field="*{playerResults[__${rowStat.index}__].playerAway.id}"
                                        class="form-control">
                                    <option th:each="user: ${awayMembers}"
                                            th:text="${user.name}"
                                            th:value="${user.id}"
                                            th:selected="${user.id == result.playerAway.id}"
                                    ></option>
                                </select>
                            </td>
                            <td class="racks">
                                <input
                                        th:id="'awayRacks-' + ${result.id}"
                                        th:value="${result.awayRacks}"
                                        th:field="*{playerResults[__${rowStat.index}__].awayRacks}"
                                        type="text"
                                />
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div class="footer-submit">
                    <input id="player-results-submit" class="btn btn-lg btn-success" type="submit" value="Submit"/>

                <a th:href="@{/app/scores/{id}/{matchId}/add/{date} (id=${season.id},date=${date},matchId=${results.matchId})}">
                    <h4 class="add-one"><span class="label label-primary">Add One</span></h4>
                </a>
                <a th:href="@{/app/scores/{id}/{matchId}/add/{date}/four (id=${season.id},date=${date},matchId=${results.matchId})}">
                    <h4 class="add-four"><span class="label label-primary">Add Four</span></h4>
                </a>
                <a th:href="@{/app/scores/{id}/{matchId}/delete (id=${season.id},matchId=${results.matchId})}">
                    <h4 class="delete-all"><span class="label label-danger">Delete All</span></h4>
                </a>
                </div>
            </form>
        </div>
    </div>
</div>
